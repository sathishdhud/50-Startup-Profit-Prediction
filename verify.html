<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Verify Account</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
 margin:0;
 height:100vh;
 display:flex;
 align-items:center;
 justify-content:center;
 background:#f5f7fb;
 font-family:Arial,Helvetica,sans-serif;
}

.box{
 background:#fff;
 padding:40px 30px;
 text-align:center;
 width:340px;
 box-shadow:0 10px 25px rgba(0,0,0,.15);
 border-radius:6px;
}

.loader{
 width:38px;
 height:38px;
 border:4px solid #eee;
 border-top:4px solid #ff5722;
 border-radius:50%;
 animation:spin 1s linear infinite;
 margin:20px auto;
}

@keyframes spin{
 to{transform:rotate(360deg);}
}

.success{color:#28a745;font-weight:600;}
.error{color:red;font-weight:600;}

</style>
</head>

<body>

<div class="box">
 <h2>Email Verification</h2>
 <div class="loader" id="loader"></div>
 <p id="msg">Verifying your account...</p>
</div>

<script>

const API="https://maaney-backend.onrender.com";

const params=new URLSearchParams(window.location.search);
const token=params.get("token");

if(!token){
 document.getElementById("msg").innerHTML="<span class='error'>Invalid link</span>";
 document.getElementById("loader").style.display="none";
}else{

 fetch(API+"/verify?token="+token)
 .then(res=>res.text())
 .then(txt=>{

  document.getElementById("loader").style.display="none";
  document.getElementById("msg").innerHTML="<span class='success'>"+txt+"</span>";

  setTimeout(()=>{
   window.location.href="login.html"; // login page
  },2500);

 }).catch(()=>{
  document.getElementById("loader").style.display="none";
  document.getElementById("msg").innerHTML="<span class='error'>Verification failed</span>";
 });

}

</script>

</body>
</html>
