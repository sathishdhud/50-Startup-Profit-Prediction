<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product Content Generator</title>

<style>
body{
  font-family:Arial;
  background:#f4f4f4;
}

.container{
  max-width:800px;
  margin:40px auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
}

input{
  width:100%;
  padding:12px;
  font-size:16px;
}

button{
  margin-top:10px;
  padding:10px 18px;
  border:none;
  border-radius:8px;
  background:#111;
  color:white;
  cursor:pointer;
}

#output{
  margin-top:20px;
  border:1px solid #ddd;
  padding:15px;
  min-height:200px;
  background:#fafafa;
}
</style>
</head>

<body>

<div class="container">

<h2>E-Commerce Product Generator</h2>

<input id="product" placeholder="Enter product name (Example: Samsung Galaxy S24)">

<button onclick="generate()">Generate Product Content</button>

<div id="output"></div>

</div>

<script>
async function generate(){

  const product = document.getElementById("product").value;
  if(!product){
    alert("Enter product name");
    return;
  }

  document.getElementById("output").innerHTML = "Generating product content...";

  // INTERNAL PROMPT (hidden from user)
  const enhancedPrompt = `
You are a strict product data generator.

Product: ${product}

Return ONLY valid JSON.

NO paragraphs.
NO marketing.
NO adjectives.

Schema:

{
 "title":"",
 "brand":"",
 "model":"",
 "display_size":"",
 "display_type":"",
 "refresh_rate":"",
 "processor":"",
 "ram":"",
 "storage":"",
 "rear_camera":"",
 "front_camera":"",
 "battery":"",
 "charging":"",
 "os":"",
 "wifi":"",
 "bluetooth":"",
 "five_g":""
}

Rules:
- Every field must be filled.
- Use numeric values only.
- Example: 6.2 inch, 8GB RAM, 4000mAh.
- Do not write sentences.
- Output JSON only.
`;


  const payload = {
    prompt:{ id:"fast_draft/text", version:4 },
    variables:{
      title:product,
      topic:product,
      summary:enhancedPrompt
    }
  };

  const res = await fetch("https://quillbot.com/api/raven/generate/text/stream",{
    method:"POST",
    headers:{
      "Content-Type":"application/json"
    },
    body:JSON.stringify(payload)
  });

  const reader = res.body.getReader();
  const decoder = new TextDecoder();

  let html="";

  while(true){
    const {value,done} = await reader.read();
    if(done) break;

    const chunk = decoder.decode(value);

    chunk.split("\n").forEach(line=>{
      try{
        const j = JSON.parse(line);
        if(j.content){
          html+=j.content;
          document.getElementById("output").innerHTML=html;
        }
      }catch(e){}
    });
  }
}
</script>

</body>
</html>
